"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const transport_1 = require("./transport");
class SMS {
    constructor(config) {
        this.config = config;
        this.transport = new transport_1.default(config);
    }
    /**
     * Send HTTP POST Request to Infobip
     * to send a sms
     *
     * @param options
     */
    send(options) {
        return new Promise((resolve, reject) => {
            //path for this request
            let path = Array.isArray(options.to) ? '/sms/2/text/single' : '/sms/1/text/single';
            let body = {
                "to": options.to,
                "from": options.from,
                "text": options.text,
            };
            this.transport.send({ "path": path, "body": body }, function (err, res, resBody) {
                if (err)
                    return reject(err);
                if (res.statusCode == 200)
                    return resolve(resBody);
                else
                    return reject(resBody);
            });
        });
    }
    /**
     * Send HTTP POST Request to Infobip
     * to send bulk sms
     *
     * @param options
     */
    sendBulk(options) {
        return new Promise((resolve, reject) => {
            //path for this request
            let path = '/sms/1/text/multi';
            let body = {
                "messages": options
            };
            this.transport.send({ "path": path, "body": body }, function (err, res, resBody) {
                if (err)
                    return reject(err);
                if (res.statusCode == 200)
                    return resolve(resBody);
                else
                    return reject(resBody);
            });
        });
    }
}
exports.SMS = SMS;
